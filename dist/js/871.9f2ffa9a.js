"use strict";(self["webpackChunkakademia_vue_2"]=self["webpackChunkakademia_vue_2"]||[]).push([[871],{6871:function(t,e,a){a.r(e),a.d(e,{default:function(){return M}});var s=a(3396),i=a(7139),n=a(9242);const l=t=>((0,s.dD)("data-v-eb103760"),t=t(),(0,s.Cn)(),t),c={key:0},d={class:"overlay"},r=l((()=>(0,s._)("span",{class:"text title"},"Delete?",-1))),o={class:"overlay-options"},u={key:1},p={class:"overlay"},h=l((()=>(0,s._)("span",{class:"text title"},"Change Values",-1))),v={class:"overlay-inputs"},m={class:"overlay-options"},y={class:"container-right"},I=(0,s.uE)('<div class="header" data-v-eb103760></div><div class="container-loading" data-v-eb103760><span class="text title dark center" data-v-eb103760>Loading</span><div class="dot-container" data-v-eb103760><span class="dot-loading" data-v-eb103760></span><span class="dot-loading" data-v-eb103760></span><span class="dot-loading" data-v-eb103760></span></div></div>',2),k=l((()=>(0,s._)("div",{class:"header"},null,-1))),_={class:"container-loading"},g=l((()=>(0,s._)("span",{class:"text title dark"},"Error:",-1))),b={class:"header"},x=l((()=>(0,s._)("span",{class:"text blue button"},"Back",-1))),w=[x],C={class:"text title"},D={class:"container-items"},f={class:"input-checkbox-div"},$=["checked","onChange"],L={class:"text title"},V=["onClick"],E=["onClick"],q=(0,s.uE)('<hr data-v-eb103760><div class="container-loading" data-v-eb103760><span class="text title dark center" data-v-eb103760>Loading</span><div class="dot-container" data-v-eb103760><span class="dot-loading" data-v-eb103760></span><span class="dot-loading" data-v-eb103760></span><span class="dot-loading" data-v-eb103760></span></div></div><hr data-v-eb103760>',3),Z={class:"list-detail-item"};function H(t,e,a,l,x,H){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",{class:(0,i.C_)(["container-overlay",{disabled:!x.overlay}])},[x.overlayDelete?((0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",d,[r,(0,s._)("div",o,[(0,s._)("span",{class:"text blue button",onClick:e[0]||(e[0]=t=>H.deleteList(!1,!1))},"Cancel"),(0,s._)("a",{class:"text blue button",onClick:[e[1]||(e[1]=t=>H.deleteList(!1,!0)),e[2]||(e[2]=(0,n.iM)(((...t)=>H.openLists&&H.openLists(...t)),["prevent"]))],href:""},"Delete")])])])):x.overlayValues?((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",p,[h,(0,s._)("div",v,[(0,s.wy)((0,s._)("input",{class:"input text",type:"number",min:"0",max:"1000","onUpdate:modelValue":e[3]||(e[3]=t=>x.quantityInput=t),onKeyup:e[4]||(e[4]=(0,n.D2)((t=>H.changeItemValues(!1,!0,null)),["enter"]))},null,544),[[n.nr,x.quantityInput]]),(0,s.wy)((0,s._)("input",{class:"input text",type:"text",placeholder:"ks, kg, ml...",maxlength:"18",spellcheck:"false","onUpdate:modelValue":e[5]||(e[5]=t=>x.unitInput=t),onKeyup:e[6]||(e[6]=(0,n.D2)((t=>H.changeItemValues(!1,!0,null)),["enter"]))},null,544),[[n.nr,x.unitInput]])]),(0,s._)("div",m,[(0,s._)("span",{class:"text blue button",onClick:e[7]||(e[7]=t=>H.changeItemValues(!1,!1,null))},"Cancel"),(0,s._)("a",{class:"text blue button",onClick:e[8]||(e[8]=t=>H.changeItemValues(!1,!0,null))},"Submit")])])])):(0,s.kq)("",!0)],2),(0,s._)("div",y,[x.list?x.list.error?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[k,(0,s._)("div",_,[g,(0,s.Uk)(" "+(0,i.zw)(x.list.error),1)])],64)):((0,s.wg)(),(0,s.iD)(s.HY,{key:2},[(0,s._)("div",b,[(0,s._)("a",{href:"",onClick:e[9]||(e[9]=(0,n.iM)(((...t)=>H.openLists&&H.openLists(...t)),["prevent"]))},w),(0,s._)("span",C,(0,i.zw)(x.list.title),1),(0,s._)("span",{class:"text red button",onClick:e[10]||(e[10]=t=>H.deleteList(!0,!1))},"Delete")]),(0,s._)("div",D,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(x.list.items,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"list-detail-item",key:`item-${t.id}`},[(0,s._)("div",null,[(0,s._)("div",f,[(0,s._)("input",{class:"input-checkbox",checked:H.isChecked(t),type:"checkbox",onChange:e=>H.updateCheckbox(t)},null,40,$)]),(0,s._)("span",L,(0,i.zw)(t.name),1)]),(0,s._)("div",null,[(0,s._)("span",{class:"text blue button",onClick:e=>H.changeItemValues(!0,!1,t)},(0,i.zw)(t.value+" "+t.unit),9,V),(0,s._)("span",{class:"text red button",style:{"margin-left":"16px"},onClick:e=>H.deleteListItem(t)},"Remove",8,E)])])))),128)),x.canInteract?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[q],64)),(0,s._)("div",Z,[(0,s.wy)((0,s._)("input",{class:"input text",type:"text",placeholder:"Ingredients...",spellcheck:"false","onUpdate:modelValue":e[11]||(e[11]=t=>x.addItemInput=t),onKeyup:e[12]||(e[12]=(0,n.D2)(((...t)=>H.addItem&&H.addItem(...t)),["enter"]))},null,544),[[n.nr,x.addItemInput]])])])],64)):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[I],64))])],64)}var Y=a(4161),z={data(){return{list:null,canInteract:!0,addItemInput:"",quantityInput:"",unitInput:"",tempItem:null,overlay:!1,overlayDelete:!1,overlayValues:!1}},methods:{async update(){try{const{data:{data:t}}=await Y.Z.get("/api/v1/shopping-lists"),e=t.find((({id:t})=>t==this.$route.params.id));this.list=e}catch(t){console.error("Error:",t),this.list={error:t}}},async updateCheckbox({id:t}){try{const e=this.list.items.find((({id:e})=>e==t));await Y.Z.put(`/api/v1/shopping-lists/${this.$route.params.id}/items/${t}`,{id:e.id,name:e.name,value:e.value,unit:e.unit,is_checked:!e.is_checked})}catch(e){console.error("Error:",e)}},async addItem(){if(this.canInteract){try{if(""==this.addItemInput)return;this.canInteract=!1;const t=this.addItemInput;this.addItemInput="",await Y.Z.post(`/api/v1/shopping-lists/${this.$route.params.id}/items`,{id:0!=this.list.items.length?this.list.items[0].id+1:0,name:t,value:"1",unit:"piece",is_checked:!1})}catch(t){console.error("Error:",t)}this.canInteract=!0}},async deleteList(t,e){if(this.canInteract){try{if(t&&(this.overlayDelete=t,this.overlayValues=!t),this.overlay=t,!e)return;this.canInteract=!1,await Y.Z.delete(`/api/v1/shopping-lists/${this.$route.params.id}`)}catch(a){console.error("Error:",a)}this.canInteract=!0}},async deleteListItem({id:t}){if(this.canInteract){this.canInteract=!1;try{await Y.Z.delete(`/api/v1/shopping-lists/${this.$route.params.id}/items/${t}`)}catch(e){console.error("Error:",e)}this.canInteract=!0}},async changeItemValues(t,e,a){a&&(this.tempItem=a,this.quantityInput=a.value,this.unitInput=a.unit),t&&(this.overlayValues=t,this.overlayDelete=!t),this.overlay=t,e&&this.tempItem&&await Y.Z.put(`/api/v1/shopping-lists/${this.$route.params.id}/items/${this.tempItem.id}`,{id:this.tempItem.id,name:this.tempItem.name,value:this.quantityInput,unit:this.unitInput,is_checked:this.tempItem.is_checked})},isChecked({id:t}){return!!this.list.items.find((e=>e.id==t)).is_checked},openLists(){this.$router.replace({name:"Shopping List - List"})}},async mounted(){this.update()},async updated(){this.update()}},K=a(89);const U=(0,K.Z)(z,[["render",H],["__scopeId","data-v-eb103760"]]);var M=U}}]);
//# sourceMappingURL=871.9f2ffa9a.js.map