"use strict";(self["webpackChunkakademia_vue_2"]=self["webpackChunkakademia_vue_2"]||[]).push([[950],{9950:function(t,e,s){s.r(e),s.d(e,{default:function(){return B}});var a=s(3396),i=s(7139),n=s(9242);const l=t=>((0,a.dD)("data-v-6ca59bcd"),t=t(),(0,a.Cn)(),t),c={key:0},r={class:"overlay"},u=l((()=>(0,a._)("span",{class:"text title"},"Delete?",-1))),d={class:"overlay-options"},o={key:1},p={class:"overlay"},h=l((()=>(0,a._)("span",{class:"text title"},"Change Values",-1))),m={class:"overlay-inputs"},v={class:"overlay-options"},y={class:"container-right"},I=l((()=>(0,a._)("div",{class:"header"},null,-1))),_=l((()=>(0,a._)("div",{class:"container-loading"},[(0,a._)("span",{class:"text title dark center"},"Loading")],-1))),k=l((()=>(0,a._)("div",{class:"header"},null,-1))),g={class:"container-loading"},x=l((()=>(0,a._)("span",{class:"text title dark"},"Error:",-1))),b={class:"header"},w=l((()=>(0,a._)("span",{class:"text blue button"},"Back",-1))),C=[w],D={class:"text title"},f={class:"container-items"},$={class:"input-checkbox-div"},L=["checked","onChange"],V={class:"text title"},q=["onClick"],Z=["onClick"],E={class:"list-detail-item"},H=l((()=>(0,a._)("hr",null,null,-1))),Y=l((()=>(0,a._)("div",{class:"container-loading"},[(0,a._)("span",{class:"text title dark center"},"Loading")],-1)));function z(t,e,s,l,w,z){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:(0,i.C_)(["container-overlay",{disabled:!w.overlay}])},[w.overlayDelete?((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",r,[u,(0,a._)("div",d,[(0,a._)("span",{class:"text blue button",onClick:e[0]||(e[0]=t=>z.deleteList(!1,!1))},"Cancel"),(0,a._)("a",{class:"text blue button",onClick:[e[1]||(e[1]=t=>z.deleteList(!1,!0)),e[2]||(e[2]=(0,n.iM)(((...t)=>z.openLists&&z.openLists(...t)),["prevent"]))],href:""},"Delete")])])])):w.overlayValues?((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",p,[h,(0,a._)("div",m,[(0,a.wy)((0,a._)("input",{class:"input text",type:"number",min:"0",max:"1000","onUpdate:modelValue":e[3]||(e[3]=t=>w.quantityInput=t),onKeyup:e[4]||(e[4]=(0,n.D2)((t=>z.changeItemValues(!1,!0,null)),["enter"]))},null,544),[[n.nr,w.quantityInput]]),(0,a.wy)((0,a._)("input",{class:"input text",type:"text",placeholder:"ks, kg, ml...",maxlength:"18",spellcheck:"false","onUpdate:modelValue":e[5]||(e[5]=t=>w.unitInput=t),onKeyup:e[6]||(e[6]=(0,n.D2)((t=>z.changeItemValues(!1,!0,null)),["enter"]))},null,544),[[n.nr,w.unitInput]])]),(0,a._)("div",v,[(0,a._)("span",{class:"text blue button",onClick:e[7]||(e[7]=t=>z.changeItemValues(!1,!1,null))},"Cancel"),(0,a._)("a",{class:"text blue button",onClick:e[8]||(e[8]=t=>z.changeItemValues(!1,!0,null))},"Submit")])])])):(0,a.kq)("",!0)],2),(0,a._)("div",y,[w.list?w.list.error?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[k,(0,a._)("div",g,[x,(0,a.Uk)(" "+(0,i.zw)(w.list.error),1)])],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:2},[(0,a._)("div",b,[(0,a._)("a",{href:"",onClick:e[9]||(e[9]=(0,n.iM)(((...t)=>z.openLists&&z.openLists(...t)),["prevent"]))},C),(0,a._)("span",D,(0,i.zw)(w.list.title),1),(0,a._)("span",{class:"text red button",onClick:e[10]||(e[10]=t=>z.deleteList(!0,!1))},"Delete")]),(0,a._)("div",f,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.list.items,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"list-detail-item",key:`item-${t.id}`},[(0,a._)("div",null,[(0,a._)("div",$,[(0,a._)("input",{class:"input-checkbox",checked:z.isChecked(t),type:"checkbox",onChange:e=>z.updateCheckbox(t)},null,40,L)]),(0,a._)("span",V,(0,i.zw)(t.name),1)]),(0,a._)("div",null,[(0,a._)("span",{class:"text blue button",onClick:e=>z.changeItemValues(!0,!1,t)},(0,i.zw)(t.value+" "+t.unit),9,q),(0,a._)("span",{class:"text red button",style:{"margin-left":"16px"},onClick:e=>z.deleteListItem(t)},"Remove",8,Z)])])))),128)),(0,a._)("div",E,[(0,a.wy)((0,a._)("input",{class:"input text",type:"text",placeholder:"Ingredients...",spellcheck:"false","onUpdate:modelValue":e[11]||(e[11]=t=>w.addItemInput=t),onKeyup:e[12]||(e[12]=(0,n.D2)(((...t)=>z.addItem&&z.addItem(...t)),["enter"]))},null,544),[[n.nr,w.addItemInput]])]),w.canInteract?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[H,Y],64))])],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[I,_],64))])],64)}var K=s(4161),U={data(){return{list:null,canInteract:!0,addItemInput:"",quantityInput:"",unitInput:"",tempItem:null,overlay:!1,overlayDelete:!1,overlayValues:!1}},methods:{async update(){try{const{data:{data:t}}=await K.Z.get("/api/v1/shopping-lists"),e=t.find((({id:t})=>t==this.$route.params.id));this.list=e}catch(t){console.error("Error:",t),this.list={error:t}}},async updateCheckbox({id:t}){try{const e=this.list.items.find((({id:e})=>e==t));await K.Z.put(`/api/v1/shopping-lists/${this.$route.params.id}/items/${t}`,{id:e.id,name:e.name,value:e.value,unit:e.unit,is_checked:!e.is_checked})}catch(e){console.error("Error:",e)}},async addItem(){if(this.canInteract){try{if(""==this.addItemInput)return;this.canInteract=!1;const t=this.addItemInput;this.addItemInput="",await K.Z.post(`/api/v1/shopping-lists/${this.$route.params.id}/items`,{id:0!=this.list.items.length?this.list.items[0].id+1:0,name:t,value:"1",unit:"piece",is_checked:!1})}catch(t){console.error("Error:",t)}this.canInteract=!0}},async deleteList(t,e){if(this.canInteract){try{if(t&&(this.overlayDelete=t,this.overlayValues=!t),this.overlay=t,!e)return;this.canInteract=!1,await K.Z.delete(`/api/v1/shopping-lists/${this.$route.params.id}`)}catch(s){console.error("Error:",s)}this.canInteract=!0}},async deleteListItem({id:t}){if(this.canInteract){this.canInteract=!1;try{await K.Z.delete(`/api/v1/shopping-lists/${this.$route.params.id}/items/${t}`)}catch(e){console.error("Error:",e)}this.canInteract=!0}},async changeItemValues(t,e,s){s&&(this.tempItem=s,this.quantityInput=s.value,this.unitInput=s.unit),t&&(this.overlayValues=t,this.overlayDelete=!t),this.overlay=t,e&&this.tempItem&&await K.Z.put(`/api/v1/shopping-lists/${this.$route.params.id}/items/${this.tempItem.id}`,{id:this.tempItem.id,name:this.tempItem.name,value:this.quantityInput,unit:this.unitInput,is_checked:this.tempItem.is_checked})},isChecked({id:t}){return!!this.list.items.find((e=>e.id==t)).is_checked},openLists(){this.$router.replace({name:"Shopping List - List"})}},async mounted(){this.update()},async updated(){this.update()}},M=s(89);const S=(0,M.Z)(U,[["render",z],["__scopeId","data-v-6ca59bcd"]]);var B=S}}]);
//# sourceMappingURL=950.dd941255.js.map