"use strict";(self["webpackChunkakademia_vue_2"]=self["webpackChunkakademia_vue_2"]||[]).push([[762],{2762:function(t,e,s){s.r(e),s.d(e,{default:function(){return U}});var i=s(3396),a=s(7139),n=s(9242);const l={key:0},c={class:"overlay"},r=(0,i._)("span",{class:"text title"},"Delete?",-1),u={class:"overlay-options"},o={key:1},d={class:"overlay"},p=(0,i._)("span",{class:"text title"},"Change Values",-1),h={class:"overlay-inputs"},m={class:"overlay-options"},v={class:"container-right"},y=(0,i._)("div",{class:"header"},null,-1),I=(0,i._)("div",{class:"container-loading"},[(0,i._)("span",{class:"text title dark center"},"Loading")],-1),_=(0,i._)("div",{class:"header"},null,-1),k={class:"container-loading"},g=(0,i._)("span",{class:"text title dark"},"Error:",-1),x={class:"header"},b=(0,i._)("span",{class:"text blue button"},"Back",-1),w=[b],C={class:"text title"},f={class:"container-items"},D={class:"input-checkbox-div"},$=["checked","onChange"],L={class:"text title"},V=["onClick"],Z=["onClick"],q={class:"list-detail-item"};function E(t,e,s,b,E,H){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",{class:(0,a.C_)(["container-overlay",{disabled:!E.overlay}])},[E.overlayDelete?((0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",c,[r,(0,i._)("div",u,[(0,i._)("span",{class:"text blue button",onClick:e[0]||(e[0]=t=>H.deleteList(!1,!1))},"Cancel"),(0,i._)("a",{class:"text blue button",onClick:[e[1]||(e[1]=t=>H.deleteList(!1,!0)),e[2]||(e[2]=(0,n.iM)(((...t)=>H.openLists&&H.openLists(...t)),["prevent"]))],href:""},"Delete")])])])):E.overlayValues?((0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",d,[p,(0,i._)("div",h,[(0,i.wy)((0,i._)("input",{class:"input text",type:"number",min:"0",max:"1000","onUpdate:modelValue":e[3]||(e[3]=t=>E.quantityInput=t),onKeyup:e[4]||(e[4]=(0,n.D2)((t=>H.changeItemValues(!1,!0,null)),["enter"]))},null,544),[[n.nr,E.quantityInput]]),(0,i.wy)((0,i._)("input",{class:"input text",type:"text",placeholder:"ks, kg, ml...",maxlength:"18",spellcheck:"false","onUpdate:modelValue":e[5]||(e[5]=t=>E.unitInput=t),onKeyup:e[6]||(e[6]=(0,n.D2)((t=>H.changeItemValues(!1,!0,null)),["enter"]))},null,544),[[n.nr,E.unitInput]])]),(0,i._)("div",m,[(0,i._)("span",{class:"text blue button",onClick:e[7]||(e[7]=t=>H.changeItemValues(!1,!1,null))},"Cancel"),(0,i._)("a",{class:"text blue button",onClick:e[8]||(e[8]=t=>H.changeItemValues(!1,!0,null))},"Submit")])])])):(0,i.kq)("",!0)],2),(0,i._)("div",v,[E.list?E.list.error?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[_,(0,i._)("div",k,[g,(0,i.Uk)(" "+(0,a.zw)(E.list.error),1)])],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:2},[(0,i._)("div",x,[(0,i._)("a",{href:"",onClick:e[9]||(e[9]=(0,n.iM)(((...t)=>H.openLists&&H.openLists(...t)),["prevent"]))},w),(0,i._)("span",C,(0,a.zw)(E.list.title),1),(0,i._)("span",{class:"text red button",onClick:e[10]||(e[10]=t=>H.deleteList(!0,!1))},"Delete")]),(0,i._)("div",f,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(E.list.items,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"list-detail-item",key:`item-${t.id}`},[(0,i._)("div",null,[(0,i._)("div",D,[(0,i._)("input",{class:"input-checkbox",checked:H.isChecked(t),type:"checkbox",onChange:e=>H.updateCheckbox(t)},null,40,$)]),(0,i._)("span",L,(0,a.zw)(t.name),1)]),(0,i._)("div",null,[(0,i._)("span",{class:"text blue button",onClick:e=>H.changeItemValues(!0,!1,t)},(0,a.zw)(t.value+" "+t.unit),9,V),(0,i._)("span",{class:"text red button",style:{"margin-left":"16px"},onClick:e=>H.deleteListItem(t)},"Remove",8,Z)])])))),128)),(0,i._)("div",q,[(0,i.wy)((0,i._)("input",{class:"input text",type:"text",placeholder:"Ingredients...",spellcheck:"false","onUpdate:modelValue":e[11]||(e[11]=t=>E.addItemInput=t),onKeyup:e[12]||(e[12]=(0,n.D2)(((...t)=>H.addItem&&H.addItem(...t)),["enter"]))},null,544),[[n.nr,E.addItemInput]])])])],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[y,I],64))])],64)}var H=s(4161),Y={data(){return{list:null,canInteract:!0,addItemInput:"",quantityInput:"",unitInput:"",tempItem:null,overlay:!1,overlayDelete:!1,overlayValues:!1}},methods:{async update(){try{const{data:{data:t}}=await H.Z.get("/api/v1/shopping-lists"),e=t.find((({id:t})=>t==this.$route.params.id));this.list=e}catch(t){console.error("Error:",t),this.list={error:t}}},async updateCheckbox({id:t}){try{const e=this.list.items.find((({id:e})=>e==t));await H.Z.put(`/api/v1/shopping-lists/${this.$route.params.id}/items/${t}`,{id:e.id,name:e.name,value:e.value,unit:e.unit,is_checked:!e.is_checked})}catch(e){console.error("Error:",e)}},async addItem(){if(this.canInteract){this.canInteract=!1;try{if(""==this.addItemInput)return;const t=this.addItemInput;this.addItemInput="",await H.Z.post(`/api/v1/shopping-lists/${this.$route.params.id}/items`,{id:0!=this.list.items.length?this.list.items[0].id+1:0,name:t,value:"1",unit:"piece",is_checked:!1})}catch(t){console.error("Error:",t)}this.canInteract=!0}},async deleteList(t,e){if(this.canInteract){try{if(t&&(this.overlayDelete=t,this.overlayValues=!t),this.overlay=t,!e)return;this.canInteract=!1,await H.Z.delete(`/api/v1/shopping-lists/${this.$route.params.id}`)}catch(s){console.error("Error:",s)}this.canInteract=!0}},async deleteListItem({id:t}){if(this.canInteract){this.canInteract=!1;try{await H.Z.delete(`/api/v1/shopping-lists/${this.$route.params.id}/items/${t}`)}catch(e){console.error("Error:",e)}this.canInteract=!0}},async changeItemValues(t,e,s){s&&(this.tempItem=s,this.quantityInput=s.value,this.unitInput=s.unit),t&&(this.overlayValues=t,this.overlayDelete=!t),this.overlay=t,e&&this.tempItem&&await H.Z.put(`/api/v1/shopping-lists/${this.$route.params.id}/items/${this.tempItem.id}`,{id:this.tempItem.id,name:this.tempItem.name,value:this.quantityInput,unit:this.unitInput,is_checked:this.tempItem.is_checked})},isChecked({id:t}){return!!this.list.items.find((e=>e.id==t)).is_checked},openLists(){this.$router.replace({name:"Shopping List - List"})}},async mounted(){this.update()},async updated(){this.update()}},z=s(89);const K=(0,z.Z)(Y,[["render",E]]);var U=K}}]);
//# sourceMappingURL=762.8cc71e41.js.map